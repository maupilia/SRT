

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Start the observations &mdash; SRT procedures 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=29a6c3e3"></script>
      <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            SRT procedures
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../before-obs.html">Important checks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../Continuum/index.html">Continuum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Pulsar observations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../SpectralLine/index.html">Spectral lines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../SpectroPol/index.html">Spectro-polarimetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../VLBI/index.html">VLBI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../Problems/index.html">Problems during the observations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../NuragheScratch/index.html">Discos from Scratch</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../Figures/index.html">Figures</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">SRT procedures</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Start the observations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/Pulsar/L-band/ROACH1-DFB/Old/start-obs.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="toctree-wrapper compound">
</div>
<section id="start-the-observations">
<h1>Start the observations<a class="headerlink" href="#start-the-observations" title="Link to this heading"></a></h1>
<p>$ : commands to insert in a shell</p>
<section id="in-the-operatorinput-panel">
<h2>In the operatorInput panel<a class="headerlink" href="#in-the-operatorinput-panel" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><p>Insert your project number :</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">project=[projectID]</span></code></p>
</div></blockquote>
</li>
<li><p>Initial setup :</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">antennaReset</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">setupLLP</span></code></p>
</div></blockquote>
</li>
<li><p>Select the active surface shape (Parabolic for L and P-band observations) :</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">asSetup=P</span></code></p>
</div></blockquote>
</li>
<li><p>Insert the Local Oscillator value in MHz (this value may change) :</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">setLO=2188</span></code></p>
</div></blockquote>
</li>
<li><p>Choose the relevant L-band filter (linear filter for 1300-1800 MHz)</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">receiversMode=XXL4</span></code></p>
</div></blockquote>
</li>
<li><p>Set the attenuations (to zero) for the 2 polarizations arriving at the Total Power backend (this may change depending on the settings of the new IF distributor).</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">setAttenuation=0,0</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">setAttenuation=1,0</span></code></p>
</div></blockquote>
</li>
<li><p>Begin the schedule by indicating the start scan [N] or subscan [N_n] in the SCD file :</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">startSchedule=[projectID]/[schedulename].scd,[N_n]</span></code></p>
</div></blockquote>
</li>
</ol>
<p>If your schedule is LST-based (like for LEAP schedules), the antenna points to the relevant source as soon as you launch the schedule, even before the designated start time of observations (but you can start data acquisition with the ROACH1 at a later time). Check on the monitor each time that the antenna is pointing at and <strong>TRACKING</strong> the right source.</p>
</section>
<section id="on-the-leap-cluster-using-vnc">
<h2>On the LEAP cluster (using VNC):<a class="headerlink" href="#on-the-leap-cluster-using-vnc" title="Link to this heading"></a></h2>
<p>Before starting data acquisition, do the following:</p>
<ol class="arabic">
<li><p>W2: initial setup in Control directory:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">./control_init.sh</span></code></p>
</div></blockquote>
</li>
<li><p>W1: in each of the 8 tabs, launch the daemons:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">~/roach/scripts/daemon.sh</span></code></p>
</div></blockquote>
</li>
<li><p>When the antenna is tracking the first source and you are ready to start data acquisition, go to W2 and type:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">./start.csh</span></code>  Data acquisition has now started with the ROACH1.</p>
</div></blockquote>
</li>
<li><p>Immediately launch the control software (in W2) which obtains parameters from the antenna and automatically starts and stops observations, depending on whether the antenna is <strong>TRACKING</strong> or <strong>SLEWING</strong>:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">./control.csh</span></code></p>
</div></blockquote>
</li>
</ol>
<p>If necessary, this code can be interrupted (using Control-C) and re-started at any time while the antenna is tracking the same source, without any consequences.</p>
<p>You should now see: <strong>“no change. keep doing what you’re doing”</strong> while the antenna keeps tracking the same source. If all goes well, you won’t need to do anything else with data acquisition for the remainder of the session. You should however check the control window (W2) once in a while for possible errors (e.g. antenna WARNING).</p>
</section>
<section id="to-use-the-dfb-in-parallel-with-the-roach1">
<h2>To use the DFB in parallel with the ROACH1:<a class="headerlink" href="#to-use-the-dfb-in-parallel-with-the-roach1" title="Link to this heading"></a></h2>
<p>To use the DFB in parallel with the ROACH, we use “DFBController” in PASSIVE mode. DO NOT LAUNCH SEADAS, as this will interrupt the Nuraghe schedule.</p>
<p>In the LEAP cluster VNC, open another window and go to :</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">~/externalClient/LeapDFBSockets/</span></code></p>
<p>and type:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">./simple_server</span></code></p>
</div></blockquote>
<p>This will allow the DFB to check the antenna parameters of the antenna (written on the LEAP cluster) and acquire data when the tracked source is a pulsar.</p>
<p>After having prepared the ROACH1 for LEAP observations and launched
“./simple_server”, you are ready to set up the DFB.</p>
<ol class="arabic">
<li><p>Make sure the DFB is turned on (large button at the back) and make sure the cables connected to the DFB are the right ones (DFB3 &amp; DFB4 for L-band, and DFB1 &amp; DFB2 for P-band).</p></li>
<li><p>In the “PULSAR” tab, open a terminal and connect to the DFB:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">–X</span> <span class="pre">corr&#64;psrdfb</span></code>    <strong>ask for the password</strong></p>
</div></blockquote>
</li>
<li><p>Check that the DFB clock is correctly synchronized by typing:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">atdc</span></code> and press <code class="docutils literal notranslate"><span class="pre">enter</span></code></p>
<p>Check that the clock is synchronized and that the Tick phase is a
small number in ns (less than a few hundreds). If the clock needs
to be re-synchronized, follow <a class="reference external" href="http://www.jb.man.ac.uk/~pulsar/observing/DFB.pdf">these instructions</a> at pag. 53.</p>
</div></blockquote>
</li>
<li><p>Launch <strong>dfbcontroller</strong>:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">/home/corr/software/seadas/bin/dfbcontroller</span></code></p>
</div></blockquote>
</li>
<li><p>Input these parameters in the dfbcontroller interface:</p>
<blockquote>
<div><ul class="simple">
<li><p>Config: pdfb4_512_1024_1024</p></li>
<li><p>Subint time (s): 30.0</p></li>
<li><p>Frequency (MHz): 1548</p></li>
<li><p>Inverted: no</p></li>
<li><p>Write file: yes</p></li>
<li><p>Control mode: change from DIRECT to PASSIVE</p></li>
</ul>
</div></blockquote>
</li>
</ol>
<p>6. At the correct time, launch the Nuraghe schedule + start the ROACH
observing. The DFB observing will follow automatically.</p>
<p>7. Throughout the observing session, check that the DFB temperatures
don’t go above 70 degrees. If the temperatures are exceedingly high,
you will need to turn off the DFB for at least half an hour.</p>
<ol class="arabic simple" start="8">
<li><p>To end DFB observing, simply change the <code class="docutils literal notranslate"><span class="pre">Control</span> <span class="pre">mode</span></code> from PASSIVE to DIRECT. Then close the DFB windows.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, E. Egron, M. Pilia, S. Loru.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>